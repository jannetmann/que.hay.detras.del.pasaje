<!DOCTYPE html>
<html lang="en">
	<head>
		<title>three.js webgl - equirectangular video panorama</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<!-- Swiper CSS desde CDN -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">

		<!-- Estilos personalizados para spots -->
		<link rel="stylesheet" href="./css/spots.css">
	</head>
	<body>
		<header>
		</header>
		<section id="intro-container">
			<a href="./">
				<img src="./Logo/logo.svg" alt="" width="100">
			</a>
			<h1></h1>
			<p>Entender las condiciones laborales de los conductores de microbús 
				en México es pieza clave para la movilidad de millones de personas. 
				El objetivo de este recurso es humanizar la experiencia, mostrando 
				de manera inmersiva cómo son sus jornadas laborales, qué tensiones 
				atraviesan, qué tensiones generan y cómo se viven las relaciones 
				conflictuales derivadas de sus condiciones de trabajo.</p>
			<button class="explore-btn" id="intro-btn">
				Entrar
			</button>
		</section>

		<!-- Contenedor de la escena 3D -->
		<div id="container" aria-label="Escena de video 360°"></div>

		<!-- Contenedor de spots con botones HTML -->
		<section id="spots-container">
			<button class="spot" id="gallery-btn" data-lon="155" data-lat="-30">
				Galería
			</button>
			<button class="spot" id="audio-btn" data-lon="170" data-lat="25">
				Audio
			</button>
		</section>

		<!-- Contenedor de galerías -->
		<div id="spot-modal" class="spot-modal" aria-hidden="true" role="dialog" aria-modal="true">
			<div class="spot-modal__dialog">
				<div class="spot-modal__header">
					<h2 class="spot-modal__title" data-spot-modal-title>Detalle</h2>
					<button id="modal-close-btn" class="spot-modal__close" type="button" aria-label="Cerrar">&times;</button>
				</div>
				<div class="spot-modal__content">
					<!-- Ver demos @ https://swiperjs.com/demos -->
					<div id="gallery-modal-1" class="swiper-container">
						<div class="swiper-wrapper">
							<div class="swiper-slide">
								<img src="./img-dia/" alt="Imagen 1">
							</div>
							<div class="swiper-slide">
								<img src="./img/foto2.jpg" alt="Imagen 2">
							</div>
						</div>
						<div class="swiper-pagination"></div>
						<div class="swiper-button-next"></div>
						<div class="swiper-button-prev"></div>
					</div>
				</div>
			</div>
		</div>

		<!-- Elementos de audio -->
		<audio id="audio" preload="auto">
			<!-- Credits: https://freesound.org/people/alfrodou/sounds/442195/ -->
			<source src="./audio/ruido.lejano.de.cumbias.mp3" type="audio/mpeg">
		</audio>

		<video id="video" loop muted crossorigin="anonymous">
			<source src="https://res.cloudinary.com/dpfqraeom/video/upload/v1763918447/detras-del-pasaje-dia.mp4" media="(min-width: 769px)">
			<source src="https://res.cloudinary.com/dpfqraeom/video/upload/v1763922698/detras-del-pasaje-dia-mobile.mp4" media="(max-width: 768px)">
			<!-- <source src="https://res.cloudinary.com/dpfqraeom/video/upload/v1763918456/detras-del-pasaje-noche.mp4" media="(min-width: 769px)">
			<source src="https://res.cloudinary.com/dpfqraeom/video/upload/v1763922699/detras-del-pasaje-noche-mobile.mp4" media="(max-width: 768px)"> -->
		</video>

		<!-- ============================================
		     LIBRERÍAS EXTERNAS
		     ============================================ -->

		<!-- Three.js - Para la escena 3D -->
		<script type="importmap">
			{
				"imports": {
					"three": "https://cdnjs.cloudflare.com/ajax/libs/three.js/0.180.0/three.module.min.js",
					"three/addons/": "./jsm/"
				}
			}
		</script>

		<!-- Swiper JS - Para las galerías -->
		<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

		<!-- ============================================
		     ARCHIVOS JAVASCRIPT DEL PROYECTO
		     ============================================
		     Todos los módulos se cargan desde virtual-reality.js
		     ============================================
		-->
		<script src="./js/AudioManager.js"></script>
		<script src="./js/GalleryManager.js"></script>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/gsap.min.js"></script>
		<script type="module" src="./js/virtual-reality.js"></script>
	</body>
</html>
